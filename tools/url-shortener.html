<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URL Shortener | Create Short Links with Click Tracking</title>

    <!-- Enhanced SEO Meta Tags -->
    <meta
      name="description"
      content="Free URL shortener tool - Create short, trackable links for marketing campaigns. Generate custom URLs with click analytics and QR codes instantly."
    />
    <meta name="author" content="IO Web Tools" />
    <meta
      name="keywords"
      content="URL shortener, link shortener, short links, custom URLs, click tracking, QR code generator, link analytics, marketing links"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link
      rel="canonical"
      href="https://iowebtools.com/tools/url-shortener.html"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="../css/shared-clean.css" />
    <link rel="stylesheet" href="../css/tool-page.css" />
    <script src="../js/theme-init.js"></script>

    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

    <style>
      .tool-page-header {
        padding: 3rem 0;
        text-align: center;
        background: radial-gradient(
          circle at 50% 50%,
          rgba(43, 226, 180, 0.1) 0%,
          transparent 50%
        );
      }

      .tool-title {
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 1rem;
        background: linear-gradient(
          135deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .shortener-container {
        max-width: 800px;
        margin: 0 auto;
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: 0 4px 20px var(--shadow-color);
      }

      .url-input-section {
        margin-bottom: 2rem;
      }

      .url-input-group {
        display: flex;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .url-input {
        flex: 1;
        padding: 1rem;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        font-size: 1rem;
        background: var(--bg-card);
        color: var(--text-primary);
      }

      .shorten-button {
        padding: 1rem 2rem;
        background: var(--accent-primary);
        color: white;
        border: none;
        border-radius: var(--border-radius);
        font-weight: 600;
        cursor: pointer;
        transition: all var(--transition-normal);
        white-space: nowrap;
      }

      .shorten-button:hover {
        background: var(--accent-secondary);
        transform: translateY(-2px);
      }

      .shorten-button:disabled {
        background: var(--text-secondary);
        cursor: not-allowed;
        transform: none;
      }

      .custom-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .result-section {
        display: none;
        background: var(--glass-bg);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        padding: 2rem;
        margin-top: 2rem;
      }

      .short-url-display {
        background: var(--bg-card);
        border: 2px solid var(--accent-primary);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        margin-bottom: 2rem;
        text-align: center;
      }

      .short-url-link {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--accent-primary);
        text-decoration: none;
        font-family: "Courier New", monospace;
        word-break: break-all;
      }

      .short-url-link:hover {
        text-decoration: underline;
      }

      .action-buttons {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      .action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.75rem;
        background: var(--accent-primary);
        color: white;
        text-decoration: none;
        border-radius: var(--border-radius);
        font-weight: 600;
        transition: all var(--transition-normal);
        border: none;
        cursor: pointer;
      }

      .action-btn:hover {
        background: var(--accent-secondary);
        transform: translateY(-2px);
      }

      .qr-code-section {
        text-align: center;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border-color);
      }

      .qr-code-container {
        background: white;
        border-radius: var(--border-radius);
        padding: 1rem;
        display: inline-block;
        margin: 1rem 0;
      }

      .analytics-section {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border-color);
      }

      .analytics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1rem;
      }

      .analytics-card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        padding: 1rem;
        text-align: center;
      }

      .analytics-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent-primary);
        margin-bottom: 0.5rem;
      }

      .analytics-label {
        font-size: 0.8rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        font-weight: 600;
      }

      .link-history {
        margin-top: 2rem;
      }

      .history-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        margin-bottom: 1rem;
      }

      .history-original {
        flex: 1;
        margin-right: 1rem;
        color: var(--text-secondary);
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .history-short {
        color: var(--accent-primary);
        font-weight: 600;
        font-family: "Courier New", monospace;
      }

      @media (max-width: 768px) {
        .tool-title {
          font-size: 2rem;
        }

        .url-input-group {
          flex-direction: column;
        }

        .custom-options {
          grid-template-columns: 1fr;
        }

        .action-buttons {
          grid-template-columns: 1fr;
        }

        .history-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.5rem;
        }

        .history-original {
          margin-right: 0;
        }
      }
    </style>
  </head>

  <body data-theme="dark">
    <!-- Header -->
    <header class="header">
      <div class="mobile-overlay" id="mobileOverlay"></div>
      <nav class="nav">
        <a href="../index.html" class="logo">IO Web Tools</a>
        <ul class="nav-links" id="mobileNav">
          <li><a href="../index.html">Home</a></li>
          <li><a href="../finance-tools.html">Finance Tools</a></li>
          <li><a href="../technology-tools.html">Tech Tools</a></li>
          <li>
            <a href="../seo-marketing-tools.html" class="active"
              >SEO & Marketing</a
            >
          </li>
          <li>
            <a href="../privacy-security-tools.html">Privacy & Security</a>
          </li>
          <li><a href="../blog.html">Blog</a></li>
        </ul>
        <div class="nav-actions">
          <button
            class="theme-toggle"
            id="themeToggle"
            aria-label="Toggle theme"
          >
            <i class="theme-icon fas fa-sun" id="themeIcon"></i>
          </button>
          <button class="mobile-menu-btn" id="menuBtn" aria-label="Toggle menu">
            <span></span><span></span><span></span>
          </button>
        </div>
      </nav>
    </header>

    <main>
      <section class="tool-page-header">
        <div class="container">
          <nav class="breadcrumb">
            <a href="../index.html"><i class="fas fa-home"></i> Home</a>
            <span class="separator">/</span>
            <a href="../seo-marketing-tools.html">SEO & Marketing Tools</a>
            <span class="separator">/</span>
            <span class="current">URL Shortener</span>
          </nav>
          <div class="tool-category-badge">
            <i class="fas fa-link"></i>
            Link Management
          </div>
          <h1 class="tool-title">URL Shortener</h1>
          <p class="tool-subtitle">
            Create short, trackable links for your marketing campaigns. Generate
            custom URLs with analytics, QR codes, and click tracking.
          </p>
          <div class="tool-features-list">
            <div class="tool-feature">
              <i class="fas fa-compress-alt"></i>
              Short URLs
            </div>
            <div class="tool-feature">
              <i class="fas fa-chart-bar"></i>
              Click Analytics
            </div>
            <div class="tool-feature">
              <i class="fas fa-qrcode"></i>
              QR Code Generation
            </div>
            <div class="tool-feature">
              <i class="fas fa-edit"></i>
              Custom Aliases
            </div>
          </div>
        </div>
      </section>

      <section class="container" style="padding: 2rem 0">
        <div class="shortener-container">
          <h3 style="margin-bottom: 1.5rem; color: var(--text-primary)">
            <i class="fas fa-link"></i> Create Short URL
          </h3>

          <div class="url-input-section">
            <div class="form-group">
              <label class="form-label">Long URL</label>
              <div class="url-input-group">
                <input
                  type="url"
                  id="longUrl"
                  class="url-input"
                  placeholder="https://example.com/very/long/url/path"
                />
                <button class="shorten-button" onclick="shortenUrl()">
                  <i class="fas fa-compress-alt"></i> Shorten
                </button>
              </div>
            </div>

            <div class="custom-options">
              <div class="form-group">
                <label class="form-label">Custom Alias (Optional)</label>
                <input
                  type="text"
                  id="customAlias"
                  class="form-input"
                  placeholder="my-custom-link"
                  pattern="[a-zA-Z0-9-_]+"
                />
              </div>
              <div class="form-group">
                <label class="form-label">Campaign Name (Optional)</label>
                <input
                  type="text"
                  id="campaignName"
                  class="form-input"
                  placeholder="Summer Sale 2025"
                />
              </div>
            </div>
          </div>

          <div class="result-section" id="resultSection">
            <h4 style="margin-bottom: 1.5rem; color: var(--text-primary)">
              <i class="fas fa-check"></i> Short URL Created Successfully
            </h4>

            <div class="short-url-display">
              <div style="margin-bottom: 1rem; color: var(--text-secondary)">
                Your shortened URL:
              </div>
              <a
                href="#"
                class="short-url-link"
                id="shortUrlLink"
                target="_blank"
              >
                https://iowt.co/abc123
              </a>
            </div>

            <div class="action-buttons">
              <button class="action-btn" onclick="copyShortUrl()">
                <i class="fas fa-copy"></i> Copy
              </button>
              <button class="action-btn" onclick="openShortUrl()">
                <i class="fas fa-external-link-alt"></i> Open
              </button>
              <button class="action-btn" onclick="downloadQR()">
                <i class="fas fa-download"></i> QR Code
              </button>
              <button class="action-btn" onclick="shareUrl()">
                <i class="fas fa-share"></i> Share
              </button>
            </div>

            <div class="qr-code-section">
              <h5 style="margin-bottom: 1rem; color: var(--text-primary)">
                <i class="fas fa-qrcode"></i> QR Code
              </h5>
              <div class="qr-code-container" id="qrCodeContainer">
                <!-- QR code will be generated here -->
              </div>
            </div>

            <div class="analytics-section">
              <h5 style="margin-bottom: 1rem; color: var(--text-primary)">
                <i class="fas fa-chart-line"></i> Link Analytics (Demo)
              </h5>
              <div class="analytics-grid">
                <div class="analytics-card">
                  <div class="analytics-value" id="clickCount">0</div>
                  <div class="analytics-label">Total Clicks</div>
                </div>
                <div class="analytics-card">
                  <div class="analytics-value" id="clicksToday">0</div>
                  <div class="analytics-label">Clicks Today</div>
                </div>
                <div class="analytics-card">
                  <div class="analytics-value" id="uniqueClicks">0</div>
                  <div class="analytics-label">Unique Visitors</div>
                </div>
                <div class="analytics-card">
                  <div class="analytics-value" id="ctr">0%</div>
                  <div class="analytics-label">Click Rate</div>
                </div>
              </div>
            </div>
          </div>

          <div class="link-history">
            <h4 style="margin-bottom: 1rem; color: var(--text-primary)">
              <i class="fas fa-history"></i> Recent Links
            </h4>
            <div id="linkHistoryList">
              <!-- History items will be populated here -->
            </div>
          </div>
        </div>
      </section>
    </main>

    <script>
      let linkHistory = JSON.parse(
        localStorage.getItem("urlShortenerHistory") || "[]"
      );
      let currentShortUrl = "";

      function shortenUrl() {
        const longUrl = document.getElementById("longUrl").value.trim();
        const customAlias = document.getElementById("customAlias").value.trim();
        const campaignName = document
          .getElementById("campaignName")
          .value.trim();

        if (!longUrl) {
          alert("Please enter a URL to shorten");
          return;
        }

        if (!isValidUrl(longUrl)) {
          alert(
            "Please enter a valid URL (must start with http:// or https://)"
          );
          return;
        }

        const button = event.target;
        const originalText = button.innerHTML;
        button.disabled = true;
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';

        setTimeout(() => {
          const shortCode = customAlias || generateShortCode();
          currentShortUrl = `https://iowt.co/${shortCode}`;

          // Add to history
          const linkData = {
            longUrl,
            shortUrl: currentShortUrl,
            customAlias,
            campaignName,
            created: new Date().toISOString(),
            clicks: Math.floor(Math.random() * 100), // Simulated clicks
          };

          linkHistory.unshift(linkData);
          if (linkHistory.length > 10) linkHistory.pop();
          localStorage.setItem(
            "urlShortenerHistory",
            JSON.stringify(linkHistory)
          );

          showResult(linkData);
          updateHistory();

          button.disabled = false;
          button.innerHTML = originalText;
        }, 1500);
      }

      function generateShortCode() {
        const chars =
          "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        let result = "";
        for (let i = 0; i < 6; i++) {
          result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return result;
      }

      function isValidUrl(string) {
        try {
          new URL(string);
          return string.startsWith("http://") || string.startsWith("https://");
        } catch (_) {
          return false;
        }
      }

      function showResult(linkData) {
        document.getElementById("shortUrlLink").href = linkData.shortUrl;
        document.getElementById("shortUrlLink").textContent = linkData.shortUrl;

        // Generate QR code
        generateQRCode(linkData.shortUrl);

        // Update analytics (simulated)
        document.getElementById("clickCount").textContent = linkData.clicks;
        document.getElementById("clicksToday").textContent = Math.floor(
          linkData.clicks * 0.1
        );
        document.getElementById("uniqueClicks").textContent = Math.floor(
          linkData.clicks * 0.8
        );
        document.getElementById("ctr").textContent =
          (Math.random() * 5 + 2).toFixed(1) + "%";

        document.getElementById("resultSection").style.display = "block";
        document
          .getElementById("resultSection")
          .scrollIntoView({ behavior: "smooth" });
      }

      function generateQRCode(url) {
        const container = document.getElementById("qrCodeContainer");
        container.innerHTML = "";

        QRCode.toCanvas(
          url,
          {
            width: 200,
            margin: 2,
            color: {
              dark: "#000000",
              light: "#ffffff",
            },
          },
          function (error, canvas) {
            if (error) {
              console.error("QR code generation error:", error);
              container.innerHTML = "<p>Error generating QR code</p>";
              return;
            }
            container.appendChild(canvas);
          }
        );
      }

      function copyShortUrl() {
        navigator.clipboard
          .writeText(currentShortUrl)
          .then(() => {
            showNotification("Short URL copied to clipboard!", "success");
          })
          .catch(() => {
            // Fallback for older browsers
            const textArea = document.createElement("textarea");
            textArea.value = currentShortUrl;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand("copy");
            document.body.removeChild(textArea);
            showNotification("Short URL copied to clipboard!", "success");
          });
      }

      function openShortUrl() {
        window.open(currentShortUrl, "_blank");
      }

      function downloadQR() {
        const canvas = document.querySelector("#qrCodeContainer canvas");
        if (canvas) {
          const link = document.createElement("a");
          link.download = "qr-code.png";
          link.href = canvas.toDataURL();
          link.click();
          showNotification("QR code downloaded!", "success");
        }
      }

      function shareUrl() {
        if (navigator.share) {
          navigator
            .share({
              title: "Short URL",
              text: "Check out this link:",
              url: currentShortUrl,
            })
            .then(() => {
              showNotification("URL shared successfully!", "success");
            })
            .catch(console.error);
        } else {
          copyShortUrl();
        }
      }

      function updateHistory() {
        const historyList = document.getElementById("linkHistoryList");

        if (linkHistory.length === 0) {
          historyList.innerHTML =
            '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No links created yet</p>';
          return;
        }

        historyList.innerHTML = linkHistory
          .map(
            (item) => `
          <div class="history-item">
            <div class="history-original" title="${item.longUrl}">${item.longUrl}</div>
            <div class="history-short">${item.shortUrl}</div>
          </div>
        `
          )
          .join("");
      }

      function showNotification(message, type = "info") {
        const notification = document.createElement("div");
        const colors = {
          success: "#2ed573",
          error: "#ff4757",
          info: "var(--accent-primary)",
        };

        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: ${colors[type]};
          color: white;
          padding: 1rem 1.5rem;
          border-radius: 8px;
          font-weight: 500;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          z-index: 10000;
          animation: slideIn 0.3s ease;
        `;

        notification.innerHTML = `
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <i class="fas fa-${
              type === "success"
                ? "check"
                : type === "error"
                ? "exclamation-triangle"
                : "info-circle"
            }"></i>
            ${message}
          </div>
        `;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.animation = "slideOut 0.3s ease";
          setTimeout(() => {
            if (document.body.contains(notification)) {
              document.body.removeChild(notification);
            }
          }, 300);
        }, 3000);
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        updateHistory();

        // Add CSS animations
        const style = document.createElement("style");
        style.textContent = `
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
          }
        `;
        document.head.appendChild(style);

        // Example URL for demo
        document.getElementById("longUrl").value =
          "https://example.com/very/long/url/path/to/resource";
      });
    </script>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            text-align: center;
          "
        >
          <div
            style="
              display: flex;
              gap: 1.2rem;
              flex-wrap: wrap;
              justify-content: center;
            "
          >
            <a href="../privacy.html" class="secret-link">Privacy Policy</a>
            <a href="../terms.html" class="secret-link">Terms of Service</a>
            <a href="../contact.html" class="secret-link">Contact</a>
          </div>
          <div
            style="
              max-width: 600px;
              font-size: 0.85rem;
              line-height: 1.5;
              color: var(--text-secondary);
            "
          >
            <p>&copy; 2025 IO Web Tools. All rights reserved.</p>
            <p style="margin-top: 0.5rem; font-size: 0.8rem">
              Short URLs are generated locally for demonstration. In production,
              this would create actual working short links.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- JavaScript -->
    <script src="../js/shared-simple.js"></script>
  </body>
</html>
