<!-- Enhanced Google Analytics 4 Configuration -->
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-MRHXEVRZN9"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-MRHXEVRZN9", {
    // Enhanced ecommerce and user engagement tracking
    anonymize_ip: true,
    allow_google_signals: false,
    allow_ad_personalization_signals: false,
    page_title: document.title,
    custom_map: {
      custom_parameter_1: "market_focus",
      custom_parameter_2: "investment_stage",
    },
  });

  // Track enhanced events for SEO insights

  // Track scroll depth for content optimization
  let scrollTracked = false;
  window.addEventListener("scroll", () => {
    if (!scrollTracked && window.scrollY / document.body.scrollHeight > 0.5) {
      gtag("event", "scroll_depth_50", {
        event_category: "engagement",
        event_label: window.location.pathname,
        value: 50,
      });
      scrollTracked = true;
    }
  });

  // Track time on page for content quality metrics
  let timeOnPage = 0;
  setInterval(() => {
    timeOnPage += 10;
    if (timeOnPage === 60) {
      gtag("event", "engaged_session_60s", {
        event_category: "engagement",
        event_label: window.location.pathname,
        value: 60,
      });
    }
  }, 10000);

  // Track outbound links for content effectiveness
  document.addEventListener("click", (e) => {
    if (
      e.target.tagName === "A" &&
      e.target.href.includes("http") &&
      !e.target.href.includes("ioinnovationfund.com")
    ) {
      gtag("event", "outbound_click", {
        event_category: "engagement",
        event_label: e.target.href,
        transport_type: "beacon",
      });
    }
  });

  // Track search queries if search functionality exists
  function trackSiteSearch(query, results) {
    gtag("event", "search", {
      search_term: query,
      number_of_results: results,
    });
  }

  // Track downloads and PDF views
  document.addEventListener("click", (e) => {
    if (
      e.target.tagName === "A" &&
      (e.target.href.includes(".pdf") || e.target.href.includes("download"))
    ) {
      gtag("event", "file_download", {
        event_category: "engagement",
        event_label: e.target.href,
        transport_type: "beacon",
      });
    }
  });
</script>

<!-- Google Search Console Verification -->
<meta
  name="google-site-verification"
  content="YOUR_GOOGLE_SEARCH_CONSOLE_CODE"
/>

<!-- Bing Webmaster Tools Verification -->
<meta name="msvalidate.01" content="YOUR_BING_VERIFICATION_CODE" />

<!-- Yandex Webmaster Verification -->
<meta name="yandex-verification" content="YOUR_YANDEX_VERIFICATION_CODE" />

<!-- Core Web Vitals and Performance Monitoring -->
<script>
  // Monitor Core Web Vitals for SEO
  function sendToAnalytics(metric) {
    gtag("event", metric.name, {
      value: Math.round(
        metric.name === "CLS" ? metric.value * 1000 : metric.value
      ),
      event_category: "Web Vitals",
      event_label: metric.id,
      non_interaction: true,
    });
  }

  // Load Web Vitals library
  import("https://unpkg.com/web-vitals@3").then(
    ({ onCLS, onFID, onFCP, onLCP, onTTFB }) => {
      onCLS(sendToAnalytics);
      onFID(sendToAnalytics);
      onFCP(sendToAnalytics);
      onLCP(sendToAnalytics);
      onTTFB(sendToAnalytics);
    }
  );
</script>
