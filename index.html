<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trading Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        /* Replace 'your-background.jpg' with your actual image filename */
        background: url("Untitled (1200 x 800 mm).jpg") center center / cover
            no-repeat fixed,
          linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        min-height: 100vh;
        padding: 20px;
        position: relative;
      }

      /* Dark overlay for better text readability */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3);
        z-index: -1;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.98);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      h1 {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 30px;
        font-size: 2.8rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        font-weight: 700;
      }

      .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
      }

      .card {
        background: linear-gradient(145deg, #ffffff, #f8fafc);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.5);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      }

      .card h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        font-size: 1.5rem;
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
        font-weight: 600;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #34495e;
      }

      input,
      select {
        width: 100%;
        padding: 12px;
        border: 2px solid #e1e8ed;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.95);
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 15px rgba(52, 152, 219, 0.3);
        transform: translateY(-1px);
      }

      button {
        background: linear-gradient(45deg, #3498db, #2980b9);
        color: white;
        padding: 15px 30px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      button:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(52, 152, 219, 0.6);
        background: linear-gradient(45deg, #2980b9, #3498db);
      }

      button:disabled {
        background: #95a5a6;
        cursor: not-allowed;
        transform: none;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: linear-gradient(145deg, #ffffff, #f1f5f9);
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        border-left: 5px solid #3498db;
        transition: transform 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-3px);
      }

      .stat-value {
        font-size: 2.2rem;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 8px;
      }

      .stat-label {
        color: #7f8c8d;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 500;
      }

      .profit {
        color: #27ae60 !important;
      }
      .loss {
        color: #e74c3c !important;
      }
      .neutral {
        color: #95a5a6 !important;
      }

      .trade-history {
        max-height: 400px;
        overflow-y: auto;
        border: 1px solid #e1e8ed;
        border-radius: 12px;
        background: #f8fafc;
      }

      .trade-entry {
        padding: 15px;
        border-bottom: 1px solid #e1e8ed;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
      }

      .trade-entry:hover {
        background: rgba(52, 152, 219, 0.1);
        transform: translateX(5px);
      }

      .trade-info {
        flex: 1;
      }

      .trade-result {
        font-weight: bold;
        padding: 8px 15px;
        border-radius: 20px;
        color: white;
        font-size: 0.9rem;
        min-width: 80px;
        text-align: center;
      }

      .progress-bar {
        width: 100%;
        height: 25px;
        background: #ecf0f1;
        border-radius: 15px;
        overflow: hidden;
        margin: 15px 0;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #27ae60, #2ecc71);
        transition: width 0.5s ease;
        border-radius: 15px;
        box-shadow: 0 2px 8px rgba(39, 174, 96, 0.3);
      }

      .alert {
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        font-weight: 600;
        border-left: 5px solid;
      }

      .alert-success {
        background: #d5f4e6;
        color: #27ae60;
        border-left-color: #27ae60;
      }

      .alert-danger {
        background: #fdeaea;
        color: #e74c3c;
        border-left-color: #e74c3c;
      }

      .alert-warning {
        background: #fef9e7;
        color: #f39c12;
        border-left-color: #f39c12;
      }

      .full-width {
        grid-column: 1 / -1;
      }

      .chart-container {
        height: 400px;
        background: #ffffff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
        border: 1px solid #e1e8ed;
      }

      #balanceChart {
        max-width: 100%;
        height: 100%;
      }

      .pulse-animation {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @media (max-width: 768px) {
        .dashboard-grid {
          grid-template-columns: 1fr;
        }

        .container {
          padding: 20px;
        }

        h1 {
          font-size: 2.2rem;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 480px) {
        .stats-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ðŸ“ˆ Advanced Trading Dashboard</h1>

      <!-- Setup Section -->
      <div id="setupSection" class="card full-width">
        <h2>Initial Setup</h2>
        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
          "
        >
          <div class="form-group">
            <label for="startingBalance">Starting Balance ($)</label>
            <input
              type="number"
              id="startingBalance"
              value="100"
              step="0.01"
              min="1"
            />
          </div>
          <div class="form-group">
            <label for="minLotSize">Minimum Lot Size</label>
            <input
              type="number"
              id="minLotSize"
              value="0.01"
              step="0.01"
              min="0.01"
            />
          </div>
          <div class="form-group">
            <label for="dailyMaxLoss">Daily Max Loss ($)</label>
            <input
              type="number"
              id="dailyMaxLoss"
              value="1.50"
              step="0.01"
              min="0.01"
            />
          </div>
          <div class="form-group">
            <label for="takeProfitGoal">Take Profit Goal ($)</label>
            <input
              type="number"
              id="takeProfitGoal"
              value="0.30"
              step="0.01"
              min="0.01"
            />
          </div>
          <div class="form-group">
            <label for="maxLoss">Max Loss per Trade ($)</label>
            <input
              type="number"
              id="maxLoss"
              value="0.15"
              step="0.01"
              min="0.01"
            />
          </div>
        </div>
        <button onclick="startTrading()" class="pulse-animation">
          Start Trading Session
        </button>
      </div>

      <!-- Stats Section -->
      <div id="statsSection" style="display: none">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="currentBalance">$100.00</div>
            <div class="stat-label">Current Balance</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="currentLotSize">0.01</div>
            <div class="stat-label">Current Lot Size</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="tradesInSet">0/5</div>
            <div class="stat-label">Trades in Set</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="dailyPnL">$0.00</div>
            <div class="stat-label">Daily P&L</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="winRate">0%</div>
            <div class="stat-label">Win Rate</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalTrades">0</div>
            <div class="stat-label">Total Trades</div>
          </div>
        </div>
      </div>

      <!-- Trading Section -->
      <div id="tradingSection" style="display: none">
        <div class="dashboard-grid">
          <div class="card">
            <h2>Enter Trade</h2>
            <div class="form-group">
              <label for="instrument">Select Instrument</label>
              <select id="instrument">
                <option value="NASDAQ">NASDAQ</option>
                <option value="SP500">S&P 500</option>
                <option value="STOXX50">STOXX 50</option>
                <option value="DE30">DE30</option>
                <option value="JP225">JP225</option>
              </select>
            </div>
            <div class="form-group">
              <label for="tradeResult">Trade Result ($)</label>
              <input
                type="number"
                id="tradeResult"
                step="0.01"
                placeholder="Enter profit (+) or loss (-)"
              />
            </div>
            <button onclick="submitTrade()" id="submitTradeBtn">
              Submit Trade
            </button>

            <div
              style="
                margin-top: 20px;
                padding: 15px;
                background: #f8fafc;
                border-radius: 8px;
              "
            >
              <div style="margin-bottom: 8px">
                <strong style="color: #27ae60">Expected Profit:</strong> $<span
                  id="expectedProfit"
                  >0.30</span
                >
              </div>
              <div>
                <strong style="color: #e74c3c">Max Loss:</strong> $<span
                  id="expectedLoss"
                  >-0.15</span
                >
              </div>
            </div>
          </div>

          <div class="card">
            <h2>Set Progress</h2>
            <div class="progress-bar">
              <div
                class="progress-fill"
                id="setProgress"
                style="width: 0%"
              ></div>
            </div>
            <div
              style="
                text-align: center;
                margin-top: 10px;
                font-weight: 600;
                color: #2c3e50;
              "
            >
              <span id="setProgressText">Trade 1 of 5</span>
            </div>

            <div
              id="setCompleteSection"
              style="display: none; margin-top: 20px"
            >
              <div class="alert alert-warning">
                <strong>Set Complete!</strong> Enter your actual total balance
                to proceed.
              </div>
              <div class="form-group">
                <label for="actualBalance">Actual Balance ($)</label>
                <input type="number" id="actualBalance" step="0.01" />
              </div>
              <button onclick="processSetCompletion()">Process Results</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Chart Section - Now with real Chart.js implementation -->
      <div id="chartSection" style="display: none" class="card full-width">
        <h2>Live Balance Tracker</h2>
        <div class="chart-container">
          <canvas id="balanceChart"></canvas>
        </div>
      </div>

      <!-- History Section -->
      <div id="historySection" style="display: none" class="card full-width">
        <h2>Trade History</h2>
        <div class="trade-history" id="tradeHistory">
          <!-- Trade entries will be added here -->
        </div>
      </div>
    </div>

    <script>
      // Trading state
      let tradingState = {
        startingBalance: 100,
        currentBalance: 100,
        currentLotSize: 0.01,
        minLotSize: 0.01,
        dailyMaxLoss: 1.5,
        takeProfitGoal: 0.3,
        maxLoss: 0.15,
        tradesInCurrentSet: 0,
        currentSetStartBalance: 100,
        trades: [],
        sets: [],
        dailyPnL: 0,
        sessionActive: false,
        balanceHistory: [],
      };

      // Chart.js instance
      let balanceChart = null;

      function initializeChart() {
        const ctx = document.getElementById("balanceChart").getContext("2d");

        // Initialize with starting balance
        tradingState.balanceHistory = [
          {
            trade: 0,
            balance: tradingState.startingBalance,
            timestamp: new Date(),
          },
        ];

        balanceChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: ["Start"],
            datasets: [
              {
                label: "Account Balance ($)",
                data: [tradingState.startingBalance],
                borderColor: "#3498db",
                backgroundColor: "rgba(52, 152, 219, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: "#3498db",
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                pointRadius: 6,
                pointHoverRadius: 8,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: true,
                position: "top",
                labels: {
                  color: "#2c3e50",
                  font: {
                    size: 14,
                    weight: "bold",
                  },
                },
              },
            },
            scales: {
              x: {
                title: {
                  display: true,
                  text: "Trade Number",
                  color: "#2c3e50",
                  font: {
                    size: 14,
                    weight: "bold",
                  },
                },
                ticks: {
                  color: "#7f8c8d",
                },
                grid: {
                  color: "rgba(0, 0, 0, 0.1)",
                },
              },
              y: {
                title: {
                  display: true,
                  text: "Balance ($)",
                  color: "#2c3e50",
                  font: {
                    size: 14,
                    weight: "bold",
                  },
                },
                ticks: {
                  color: "#7f8c8d",
                  callback: function (value) {
                    return "$" + value.toFixed(2);
                  },
                },
                grid: {
                  color: "rgba(0, 0, 0, 0.1)",
                },
              },
            },
            animation: {
              duration: 1000,
              easing: "easeInOutQuart",
            },
            interaction: {
              intersect: false,
              mode: "index",
            },
          },
        });
      }

      function updateChart() {
        if (!balanceChart) return;

        const labels = tradingState.balanceHistory.map((_, index) =>
          index === 0 ? "Start" : `Trade ${index}`
        );
        const data = tradingState.balanceHistory.map((entry) => entry.balance);

        balanceChart.data.labels = labels;
        balanceChart.data.datasets[0].data = data;

        // Color the line based on performance
        const currentBalance = tradingState.currentBalance;
        const startingBalance = tradingState.startingBalance;

        if (currentBalance > startingBalance) {
          balanceChart.data.datasets[0].borderColor = "#27ae60";
          balanceChart.data.datasets[0].backgroundColor =
            "rgba(39, 174, 96, 0.1)";
          balanceChart.data.datasets[0].pointBackgroundColor = "#27ae60";
        } else if (currentBalance < startingBalance) {
          balanceChart.data.datasets[0].borderColor = "#e74c3c";
          balanceChart.data.datasets[0].backgroundColor =
            "rgba(231, 76, 60, 0.1)";
          balanceChart.data.datasets[0].pointBackgroundColor = "#e74c3c";
        } else {
          balanceChart.data.datasets[0].borderColor = "#3498db";
          balanceChart.data.datasets[0].backgroundColor =
            "rgba(52, 152, 219, 0.1)";
          balanceChart.data.datasets[0].pointBackgroundColor = "#3498db";
        }

        balanceChart.update();
      }

      function startTrading() {
        // Get setup values
        tradingState.startingBalance = parseFloat(
          document.getElementById("startingBalance").value
        );
        tradingState.currentBalance = tradingState.startingBalance;
        tradingState.minLotSize = parseFloat(
          document.getElementById("minLotSize").value
        );
        tradingState.currentLotSize = tradingState.minLotSize;
        tradingState.dailyMaxLoss = parseFloat(
          document.getElementById("dailyMaxLoss").value
        );
        tradingState.takeProfitGoal = parseFloat(
          document.getElementById("takeProfitGoal").value
        );
        tradingState.maxLoss = parseFloat(
          document.getElementById("maxLoss").value
        );
        tradingState.currentSetStartBalance = tradingState.currentBalance;
        tradingState.sessionActive = true;

        // Show trading sections
        document.getElementById("setupSection").style.display = "none";
        document.getElementById("statsSection").style.display = "block";
        document.getElementById("tradingSection").style.display = "block";
        document.getElementById("historySection").style.display = "block";
        document.getElementById("chartSection").style.display = "block";

        // Initialize chart
        setTimeout(() => {
          initializeChart();
        }, 100);

        updateDisplay();
        updateExpectedValues();
      }

      function updateExpectedValues() {
        const lotMultiplier =
          tradingState.currentLotSize / tradingState.minLotSize;
        const expectedProfit = tradingState.takeProfitGoal * lotMultiplier;
        const expectedLoss = tradingState.maxLoss * lotMultiplier;

        document.getElementById("expectedProfit").textContent =
          expectedProfit.toFixed(2);
        document.getElementById("expectedLoss").textContent =
          (-expectedLoss).toFixed(2);
      }

      function submitTrade() {
        if (!tradingState.sessionActive) return;

        const instrument = document.getElementById("instrument").value;
        const result = parseFloat(document.getElementById("tradeResult").value);

        if (isNaN(result)) {
          alert("Please enter a valid trade result");
          return;
        }

        // Check daily loss limit
        if (tradingState.dailyPnL + result < -tradingState.dailyMaxLoss) {
          alert(
            `Daily loss limit of $${tradingState.dailyMaxLoss} would be exceeded. Trading stopped for today.`
          );
          return;
        }

        // Add trade
        const trade = {
          id: tradingState.trades.length + 1,
          instrument: instrument,
          lotSize: tradingState.currentLotSize,
          result: result,
          timestamp: new Date(),
          setNumber: tradingState.sets.length + 1,
        };

        tradingState.trades.push(trade);
        tradingState.currentBalance += result;
        tradingState.dailyPnL += result;
        tradingState.tradesInCurrentSet++;

        // Add to balance history for chart
        tradingState.balanceHistory.push({
          trade: tradingState.trades.length,
          balance: tradingState.currentBalance,
          timestamp: new Date(),
        });

        // Update chart
        updateChart();

        // Clear input
        document.getElementById("tradeResult").value = "";

        // Animate the balance update
        const balanceElement = document.getElementById("currentBalance");
        balanceElement.classList.add("pulse-animation");
        setTimeout(() => {
          balanceElement.classList.remove("pulse-animation");
        }, 2000);

        // Check if set is complete
        if (tradingState.tradesInCurrentSet >= 5) {
          showSetCompletion();
        }

        updateDisplay();
        addTradeToHistory(trade);
      }

      function showSetCompletion() {
        document.getElementById("setCompleteSection").style.display = "block";
        document.getElementById("submitTradeBtn").disabled = true;
        document.getElementById("actualBalance").value =
          tradingState.currentBalance.toFixed(2);
      }

      function processSetCompletion() {
        const actualBalance = parseFloat(
          document.getElementById("actualBalance").value
        );
        const setStartBalance = tradingState.currentSetStartBalance;

        // Create set record
        const setResult = {
          setNumber: tradingState.sets.length + 1,
          startBalance: setStartBalance,
          expectedBalance: tradingState.currentBalance,
          actualBalance: actualBalance,
          lotSize: tradingState.currentLotSize,
          trades: tradingState.trades.slice(-5), // Last 5 trades
        };

        tradingState.sets.push(setResult);
        tradingState.currentBalance = actualBalance;

        // Update balance history if there's a discrepancy
        if (
          actualBalance !==
          tradingState.balanceHistory[tradingState.balanceHistory.length - 1]
            .balance
        ) {
          tradingState.balanceHistory[
            tradingState.balanceHistory.length - 1
          ].balance = actualBalance;
          updateChart();
        }

        // Determine next lot size
        if (actualBalance > setStartBalance + 1) {
          // Double lot size but cap at 1.0
          tradingState.currentLotSize = Math.min(
            tradingState.currentLotSize * 2,
            1.0
          );
          showAlert(
            "success",
            `ðŸš€ Great performance! Lot size increased to ${tradingState.currentLotSize}`
          );
        } else if (actualBalance >= setStartBalance) {
          // Maintain current lot size
          showAlert(
            "warning",
            `âš¡ Steady performance. Lot size remains at ${tradingState.currentLotSize}`
          );
        } else {
          // Stop trading
          showAlert(
            "danger",
            "âŒ Performance below threshold. Trading session ended."
          );
          tradingState.sessionActive = false;
          document.getElementById("submitTradeBtn").disabled = true;
          return;
        }

        // Check if reached maximum lot size
        if (tradingState.currentLotSize >= 1.0) {
          showAlert(
            "success",
            "ðŸŽ‰ Congratulations! You've reached the maximum lot size of 1.0!"
          );
          tradingState.sessionActive = false;
          document.getElementById("submitTradeBtn").disabled = true;
          return;
        }

        // Reset for next set
        tradingState.tradesInCurrentSet = 0;
        tradingState.currentSetStartBalance = tradingState.currentBalance;
        document.getElementById("setCompleteSection").style.display = "none";
        document.getElementById("submitTradeBtn").disabled = false;

        updateDisplay();
        updateExpectedValues();
      }

      function showAlert(type, message) {
        const alertDiv = document.createElement("div");
        alertDiv.className = `alert alert-${type}`;
        alertDiv.textContent = message;

        const tradingSection = document.getElementById("tradingSection");
        tradingSection.insertBefore(alertDiv, tradingSection.firstChild);

        // Remove alert after 5 seconds
        setTimeout(() => {
          if (alertDiv.parentNode) {
            alertDiv.remove();
          }
        }, 5000);
      }

      function updateDisplay() {
        document.getElementById(
          "currentBalance"
        ).textContent = `$${tradingState.currentBalance.toFixed(2)}`;
        document.getElementById("currentLotSize").textContent =
          tradingState.currentLotSize.toFixed(2);
        document.getElementById(
          "tradesInSet"
        ).textContent = `${tradingState.tradesInCurrentSet}/5`;

        const dailyPnLElement = document.getElementById("dailyPnL");
        dailyPnLElement.textContent = `$${tradingState.dailyPnL.toFixed(2)}`;
        dailyPnLElement.className = `stat-value ${
          tradingState.dailyPnL >= 0 ? "profit" : "loss"
        }`;

        // Calculate win rate
        const wins = tradingState.trades.filter((t) => t.result > 0).length;
        const winRate =
          tradingState.trades.length > 0
            ? (wins / tradingState.trades.length) * 100
            : 0;
        document.getElementById("winRate").textContent = `${winRate.toFixed(
          1
        )}%`;

        document.getElementById("totalTrades").textContent =
          tradingState.trades.length;

        // Update set progress
        const progress = (tradingState.tradesInCurrentSet / 5) * 100;
        document.getElementById("setProgress").style.width = `${progress}%`;
        document.getElementById("setProgressText").textContent = `Trade ${
          tradingState.tradesInCurrentSet + 1
        } of 5`;
      }

      function addTradeToHistory(trade) {
        const historyContainer = document.getElementById("tradeHistory");
        const tradeDiv = document.createElement("div");
        tradeDiv.className = "trade-entry";

        const resultClass = trade.result >= 0 ? "profit" : "loss";
        const resultBg = trade.result >= 0 ? "#27ae60" : "#e74c3c";

        tradeDiv.innerHTML = `
          <div class="trade-info">
            <div style="font-weight: 600; color: #2c3e50;">
              ${trade.instrument} - Lot ${trade.lotSize}
            </div>
            <div style="color: #7f8c8d; font-size: 0.9rem;">
              ${trade.timestamp.toLocaleString()}
            </div>
          </div>
          <div class="trade-result" style="background: ${resultBg};">
            ${trade.result >= 0 ? "+" : ""}$${trade.result.toFixed(2)}
          </div>
        `;

        // Add to beginning of history
        historyContainer.insertBefore(tradeDiv, historyContainer.firstChild);
      }

      // Initialize display on page load
      document.addEventListener("DOMContentLoaded", function () {
        updateExpectedValues();
      });
    </script>
  </body>
</html>
